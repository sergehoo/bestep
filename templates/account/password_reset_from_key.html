{% extends "account/_base.html" %}
{% load i18n %}

{% block head_title %}Nouveau mot de passe — Best-Épargne{% endblock %}

{% block content %}
  <h1 class="text-2xl font-bold text-center text-sky-600">Nouveau mot de passe</h1>
  <p class="text-center text-sm text-gray-500 mt-1">Définissez un nouveau mot de passe</p>

  {% if token_fail %}
    <div class="mt-6 bg-red-50 border border-red-100 text-red-800 text-sm rounded-xl px-4 py-3">
      <p>Le lien de réinitialisation est invalide ou expiré.</p>
    </div>
    <div class="mt-6">
      <a href="{% url 'account_reset_password' %}" class="block w-full py-3 rounded-xl bg-sky-600 text-white font-semibold text-center hover:bg-sky-700 transition">
        Demander un nouveau lien
      </a>
    </div>
  {% else %}
    <form method="post" action="{{ action_url }}" class="mt-6 space-y-4">
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="bg-red-50 border border-red-100 text-red-800 text-sm rounded-xl px-4 py-3">
          {{ form.non_field_errors }}
        </div>
      {% endif %}

      {% for field in form %}
        <div>
          <label class="text-sm font-semibold">{{ field.label }}</label>
          {{ field }}
          {% if field.errors %}<p class="text-xs text-red-600 mt-1">{{ field.errors|striptags }}</p>{% endif %}
        </div>
      {% endfor %}

      <button class="w-full mt-2 py-3 rounded-xl bg-sky-600 text-white font-semibold hover:bg-sky-700 transition">
        Mettre à jour
      </button>
    </form>
  {% endif %}
{% endblock %}